nav
  box-shadow: -1px 0 0 $grey inset
  line-height: 1.5

  ul
    list-style-type: none
    padding-left: 0

    li
      a
        display: block
        text-decoration: none
        padding: .75rem 1rem .75rem 3.5rem

  > ul
    margin: 0
    padding-top: 2em

  > ul, > ul > li > ul
    > li:not(#menu-item-formations)
      position: relative

      &::before
        background-clip: content-box
        background-color: $grey
        border-radius: 100%
        box-sizing: border-box
        content: ''
        height: 1em
        left: 1.75em
        padding: .35em
        position: absolute
        transition: padding 250ms ease
        top: .95em
        width: 1em

      &:hover
        &::before
          padding: .15em

      &.active
        &::before
          background-color: $dark
          padding: 0


    li#menu-item-home
      a
        font-size: 0

        &::before
          content: 'Accueil'
          display: block
          font-size: $font-normal

    li#menu-item-formations
      > a
        pointer-events: none

    li#menu-item-formations
      &::before, &::after
        background-color: $grey
        content: ''
        display: block
        height: 1px
        margin: .5em 0 .5em 3.5rem
        width: 2em

      > a
        font-size: .7em
        font-weight: $bold
        padding-bottom: 0


  ul#anchors
    font-size: $font-small
    padding-bottom: 1em

    li
      a
        align-items: top
        display: flex
        padding: .35rem 1rem .35rem 3.5rem

        &::before
          background-color: $grey
          content: ''
          height: 1px
          margin: .75em 1em auto -1em
          transition: padding 250ms ease
          min-width: 2em


@media screen and (min-width: $mobile-menu-mq + 1px)
  nav
    > ul
      span
        display: none


@media screen and (max-width: $mobile-menu-mq)
  nav
    box-shadow: 0 0 100vw 100vw rgba(0, 0, 0, 0)

    > ul
      padding-left: 5vw

      &::before
        background: $dark
        border: solid 1px
        border-radius: 100%
        box-shadow: 0 0 2px 0 $dark
        content: ''
        height: 4em
        position: absolute
        right: -2em
        transition: box-shadow 250ms ease
        width: 4em
        z-index: 2

      li
        opacity: 0
        transition: opacity 250ms ease-in

        @for $i from 1 through 9
          &:nth-of-type(#{$i})
            transition-delay: $i * 75ms + 500ms

      span
        background-color: $white
        height: 2px
        left: 100%
        position: absolute
        top: 1.5em + 2em
        transition: left 250ms 750ms, width 250ms 750ms
        width: 1.25em
        z-index: 2

        &:nth-of-type(2)
          top: 2em + 2em
          width: 1em

        &:nth-of-type(3)
          top: 2.5em + 2em
          width: .5em

    // open state
    &:hover
      box-shadow: 0 0 100vw 100vw rgba(0, 0, 0, .15)

      > ul
        &::before
          box-shadow: 0 0 2px 4px $dark

        li
          opacity: 1

        span
          left: calc(100% - .75em)
          width: 1.5em
